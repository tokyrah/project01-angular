
<div class="subscription-order__container">
<h2 fxLayoutAlign="center center">{{ title }}</h2>
<mat-horizontal-stepper [linear]="true">
    <mat-step [stepControl]="subscriptionParamsForm">
        <ng-template matStepLabel>Select subscription parameters :</ng-template>
        <mat-card>
            <mat-card-content>
                <form [formGroup]="subscriptionParamsForm">
                    <div fxLayout="column" fxLayoutAlign="center center">
                        <div fxFlex="100%">
                            <mat-form-field appearance="outline">
                                <mat-label>Duration (months)</mat-label>
                                <mat-select formControlName="duration">
                                    <mat-option value="3">3</mat-option>
                                    <mat-option value="6">6</mat-option>
                                    <mat-option value="12">12</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div fxFlex="100%">
                            <mat-form-field appearance="outline">
                                <mat-label>Amount of gigabytes</mat-label>
                                <mat-select formControlName="storageAmount">
                                    <mat-option *ngFor="let storage of storageAmount" [value]="storage">{{ storage }}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div fxFlex="100%">
                            <mat-checkbox formControlName="upfrontPayment">Upfront Payment</mat-checkbox>
                        </div>
                        <div fxFlex="100%">
                            <button mat-raised-button color="primary" matStepperNext>Next</button>
                        </div>
                    </div>
                </form>
            </mat-card-content>
        </mat-card>
    </mat-step>

    <mat-step [stepControl]="paymentDataForm">
        <ng-template matStepLabel>Payment data :</ng-template>
        <mat-card>
            <mat-card-content>
                <form [formGroup]="paymentDataForm">
                    <div fxLayout="column" fxLayoutAlign="center center">
                        <div fxFlex="100%">
                            <mat-form-field  appearance="outline">
                                <mat-label>Credit card number</mat-label>
                                <input matInput formControlName="cardNumber"  maxlength="16">
                            </mat-form-field>
                        </div>
        
                        <div fxFlex="100%">
                            <mat-form-field appearance="outline">
                                <mat-label>Expiration date</mat-label>
                                <input matInput formControlName="expirationDate" maxlength="5" placeholder="MM/YY">
                            </mat-form-field>
                        </div>
        
                        <div fxFlex="100%">
                            <mat-form-field appearance="outline">
                                <mat-label>Security code</mat-label>
                                <input matInput formControlName="securityCode"  maxlength="8">
                            </mat-form-field>
                        </div>
        
                        <div fxFlex="100%">
                            <button mat-raised-button matStepperPrevious>Back</button>
                            <button mat-raised-button color="primary" matStepperNext>Next</button>
                        </div>
                    </div>
                </form>
            </mat-card-content>
        </mat-card>
    </mat-step>

    <mat-step [stepControl]="paymentDataForm">
        <ng-template matStepLabel>Confirmation :</ng-template>
        <mat-card>
            <mat-card-content>
                <form [formGroup]="paymentDataForm">
                    <div fxLayout="column" fxLayoutAlign="center center">
                        <div fxFlex="100%">
                            <p>Duration: {{subscriptionParamsForm.value.duration}} months</p>
                            <p>Amount of gigabytes in a cloud: {{subscriptionParamsForm.value.storageAmount}} GB</p>
                            <p>Upfront Payment: {{subscriptionParamsForm.value.upfrontPayment ? 'Yes' : 'No'}}</p>
                            <p>Total price: {{ totalPrice }} USD</p>
                        </div>
        
                        <div fxFlex="100%">
                            <mat-form-field appearance="outline">
                                <mat-label>Email</mat-label>
                                <input matInput formControlName="email">
                            </mat-form-field>
                        </div>
        
                        <div fxFlex="100%">
                            <mat-checkbox formControlName="termsAndConditions">I agree to the terms and conditions</mat-checkbox>
                        </div>
                        
                        <div fxFlex="100%">
                            <button mat-raised-button matStepperPrevious>Back</button>
                            <button mat-raised-button color="primary" (click)="onSubscriptionConfirm()">Confirmation</button>
                        </div>
                    </div>
                </form>
            </mat-card-content>
        </mat-card>
    </mat-step>
    </mat-horizontal-stepper>

</div>
